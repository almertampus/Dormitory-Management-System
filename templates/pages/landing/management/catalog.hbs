<!-- Main -->
<main class="wrapper">

    {{>sidebar}}

    <!-- Content -->
    <section class="content-wrapper" id="management">

        {{>topbar}}

        <!-- Main Content -->
        <section class="content">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-12 p-0">
                        <section class="info">
                            <table id="tableCatalog" class="table table-borderless table-striped">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Rate</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {{#each catalogs}}
                                    <tr>
                                        <td>
                                            {{name}}
                                        </td>
                                        <td>{{rate}}</td>
                                        <td>
                                            <button type="button" class="btn p-3 z-depth-0" id="editCatalogButton"
                                                data-id="{{_id}}" data-name="{{name}}" data-rate="{{rate}}"
                                                data-toggle="modal" data-target="#editCatalogModal">
                                                <img class="icon m-0" src="/images/icons/create-white-18dp.svg" alt="">
                                            </button>
                                            <button type="button" class="btn p-3 z-depth-0" id="deleteCatalogButton"
                                                data-id="{{_id}}" data-name="{{name}}" data-rate="{{rate}}"
                                                data-toggle="modal" data-target="#deleteCatalogModal">
                                                <img class="icon m-0" src="/images/icons/delete_forever-white-18dp.svg"
                                                    alt="">
                                            </button>
                                        </td>
                                    </tr>
                                    {{/each}}
                                </tbody>
                            </table>
                        </section>
                    </div>
                </div>
            </div>
        </section>

    </section>

</main>

<script>
    // Edit and delete catalog
    $(document).on("click", "#editCatalogButton, #deleteCatalogButton", function () {
        let _id = $(this).data('id');
        let name = $(this).data('name');
        let rate = $(this).data('rate');

        // Edit
        $("#inputEditCatalog_id").val(_id);
        $("#inputEditCatalogName").val(name);
        $("#inputEditCatalogRate").val(rate);

        // Delete
        $("#inputDeleteCatalog_id").val(_id);
        $("div #spanDeleteCatalogName").text(name);
        $("div #spanDeleteCatalogRate").text(rate);

        console.log(_id)
    });

    // DataTables
    $('#tableCatalog').DataTable({
        "dom": '<"d-flex justify-content-between align-items-center mb-3"Bf>t<"d-flex justify-content-between align-items-center mt-4"ip>',
        "buttons": {
            dom: {
                button: {
                    tag: 'button',
                    className: 'btn'
                }
            },
            buttons: [
                {

                    className: 'btn-custom m-0 z-depth-0',
                    text: `Add catalog`,
                    action: function (e, dt, node, config) {
                        $('#addCatalogModal').modal('show')
                    }
                },
            ]
        },
        "pageLength": 10
    });
</script>

<!-- Modal -->
{{>modals/property/add/catalog}}
{{>modals/property/edit/catalog}}
{{>modals/property/delete/catalog}}